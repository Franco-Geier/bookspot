{"version":3,"sources":["app.js"],"names":["darkMode","prefiereDarkMode","window","matchMedia","botonDarkMode","document","querySelector","matches","body","classList","add","remove","addEventListener","toggle","handleScroll","navbar","scrollY","mostrarMetodosContacto","e","contactoDiv","target","value","innerHTML","eventListener","querySelectorAll","forEach","input","actualizarContadorCarrito","button","async","event","idLibro","this","dataset","id","response","fetch","method","headers","Content-Type","JSON","stringify","id_libro","ok","data","json","textContent","status","console","error","preventDefault","bootstrap","Modal","show","contador","count"],"mappings":"AAMA,SAAAA,WACA,MAAAC,EAAAC,OAAAC,WAAA,gCACAC,EAAAC,SAAAC,cAAA,oBAEAL,EAAAM,QACAF,SAAAG,KAAAC,UAAAC,IAAA,aAEAL,SAAAG,KAAAC,UAAAE,OAAA,aAGAV,EAAAW,iBAAA,UAAA,WACAX,EAAAM,QACAF,SAAAG,KAAAC,UAAAC,IAAA,aAEAL,SAAAG,KAAAC,UAAAE,OAAA,gBAIAP,GACAA,EAAAQ,iBAAA,SAAA,WACAP,SAAAG,KAAAC,UAAAI,OAAA,gBAOA,SAAAC,eACA,MAAAC,EAAAV,SAAAC,cAAA,wBAEAS,IACAb,OAAAc,QAAA,IACAD,EAAAN,UAAAC,IAAA,SACAK,EAAAN,UAAAE,OAAA,iBAEAI,EAAAN,UAAAC,IAAA,eACAK,EAAAN,UAAAE,OAAA,WAOA,SAAAM,uBAAAC,GACA,MAAAC,EAAAd,SAAAC,cAAA,aAEA,aAAAY,EAAAE,OAAAC,MACAF,EAAAG,UAAA,sxBAoBAH,EAAAG,UAAA,kPAUA,SAAAC,gBACAvB,WAEAc,eACAZ,OAAAU,iBAAA,SAAAE,cAGAT,SAAAmB,iBAAA,mCACAC,QAAAC,GAAAA,EAAAd,iBAAA,QAAAK,yBAGAU,4BAIAtB,SAAAmB,iBAAA,gBAAAC,QAAAG,IACAA,EAAAhB,iBAAA,SAAAiB,eAAAC,GACA,MAAAC,EAAAC,KAAAC,QAAAC,GACA,IACA,MAAAC,QAAAC,MAAA,6CAAA,CACAC,OAAA,OACAC,QAAA,CACAC,eAAA,oBAEA/B,KAAAgC,KAAAC,UAAA,CAAAC,SAAAX,MAEA,GAAAI,EAAAQ,GAAA,CACA,MAAAC,QAAAT,EAAAU,OACAlB,4BAEAK,KAAAc,YAAA,UAAAF,EAAAG,OAAA,qBAAA,0BAEAC,QAAAC,MAAA,gCAEA,MAAAA,GACAD,QAAAC,MAAA,SAAAA,SAMA5C,SAAAO,iBAAA,oBAAA,WACAP,SAAAC,cAAA,gBACAM,iBAAA,SAAA,SAAAkB,GACAA,EAAAoB,iBACA,IAAAC,UAAAC,MAAA/C,SAAAC,cAAA,iBACA+C,aAQAxB,eAAAF,4BACA,IACA,MAAAQ,QAAAC,MAAA,6CACA,GAAAD,EAAAQ,GAAA,CACA,MAAAC,QAAAT,EAAAU,OACAS,EAAAjD,SAAAC,cAAA,eACAgD,IACAA,EAAAR,YAAAF,EAAAW,QAGA,MAAAN,GACAD,QAAAC,MAAA,0CAAAA,IApJA5C,SAAAO,iBAAA,oBAAA,WACAW","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    eventListener();\r\n});\r\n\r\n\r\n// Función para DarkMode\r\nfunction darkMode() {\r\n    const prefiereDarkMode = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n    const botonDarkMode = document.querySelector(\".dark-mode-boton\");\r\n\r\n    if(prefiereDarkMode.matches) {\r\n        document.body.classList.add(\"dark-mode\");\r\n    } else {\r\n        document.body.classList.remove(\"dark-mode\");\r\n    }\r\n\r\n    prefiereDarkMode.addEventListener(\"change\", function(){\r\n        if(prefiereDarkMode.matches) {\r\n            document.body.classList.add(\"dark-mode\");\r\n        } else {\r\n            document.body.classList.remove(\"dark-mode\");\r\n        }\r\n    });\r\n\r\n    if (botonDarkMode) {\r\n        botonDarkMode.addEventListener(\"click\", function() {\r\n            document.body.classList.toggle(\"dark-mode\");\r\n        });\r\n    }\r\n}\r\n\r\n\r\n// Función para navbar\r\nfunction handleScroll() {\r\n    const navbar = document.querySelector(\"nav.navbar.principal\");\r\n\r\n    if (navbar) {\r\n        if (window.scrollY > 20) {\r\n            navbar.classList.add(\"solid\");\r\n            navbar.classList.remove(\"transparent\");\r\n        } else {\r\n            navbar.classList.add(\"transparent\");\r\n            navbar.classList.remove(\"solid\");\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// Función para contacto\r\nfunction mostrarMetodosContacto(e) {\r\n    const contactoDiv = document.querySelector(\"#contacto\");\r\n\r\n    if(e.target.value === \"telefono\") {\r\n        contactoDiv.innerHTML = `         \r\n            <div class=\"campo\">           \r\n                <label for=\"telefono\">Número de Teléfono</label>\r\n                <input type=\"tel\" placeholder=\"Tu Teléfono\" name=\"contacto[tel]\" autocomplete=\"tel\" id=\"telefono\">\r\n            </div>\r\n\r\n            <p>Seleccione la Fecha y la Hora</p>\r\n            <div class=\"formulario-nombres\">\r\n                <div class=\"campo\">\r\n                    <label for=\"fecha\">Fecha:</label>\r\n                    <input type=\"date\" name=\"contacto[fecha]\" id=\"fecha\">\r\n                </div>\r\n\r\n                <div class=\"campo\">\r\n                    <label for=\"hora\">Hora:</label>\r\n                    <input type=\"time\" name=\"contacto[hora]\" id=\"hora\" min=\"09:00\" max=\"18:00\">\r\n                </div>\r\n            </div>\r\n        `;\r\n    } else {\r\n        contactoDiv.innerHTML = `\r\n            <div class=\"campo\">\r\n                <label for=\"email\">E-mail</label>\r\n                <input type=\"email\" placeholder=\"Tu Email\" name=\"contacto[email]\" autocomplete=\"email\" id=\"email\" required>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n\r\nfunction eventListener() {\r\n    darkMode();\r\n    \r\n    handleScroll();\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // Muestra campos condicionales\r\n    const metodoContacto = document.querySelectorAll('input[name=\"contacto[contacto]\"');\r\n    metodoContacto.forEach(input => input.addEventListener(\"click\", mostrarMetodosContacto));\r\n\r\n\r\n    actualizarContadorCarrito();\r\n\r\n\r\n    // Escuchar clics en los botones de agregar al carrito\r\n    document.querySelectorAll('.add-to-cart').forEach(button => {\r\n        button.addEventListener('click', async function (event) {\r\n            const idLibro = this.dataset.id;\r\n            try {\r\n                const response = await fetch('/bookspot/public/index.php/carrito/agregar', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({ id_libro: idLibro })\r\n                });\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    actualizarContadorCarrito();\r\n                    // Cambiar el texto del botón\r\n                    this.textContent = data.status === 'added' ? 'Quitar del carrito' : 'Agregar al carrito';\r\n                } else {\r\n                    console.error('Error al agregar al carrito.');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n    document.addEventListener(\"DOMContentLoaded\", function () {\r\n        const searchIcon = document.querySelector(\"#search-icon\");\r\n        searchIcon.addEventListener(\"click\", function (event) {\r\n            event.preventDefault();\r\n            const searchModal = new bootstrap.Modal(document.querySelector(\"#searchModal\"));\r\n            searchModal.show();\r\n        });\r\n    });\r\n}\r\n\r\n\r\n\r\n// Función para obtener el total de productos del carrito\r\nasync function actualizarContadorCarrito() {\r\n    try {\r\n        const response = await fetch('/bookspot/public/index.php/carrito/contar');\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            const contador = document.querySelector('.cart-count');\r\n            if (contador) {\r\n                contador.textContent = data.count;\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('Error al obtener el conteo del carrito:', error);\r\n    }\r\n}"]}