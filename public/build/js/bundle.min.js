function darkMode(){const e=window.matchMedia("(prefers-color-scheme: dark)"),o=document.querySelector(".dark-mode-boton");e.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),e.addEventListener("change",(function(){e.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")})),o&&o.addEventListener("click",(function(){document.body.classList.toggle("dark-mode")}))}function handleScroll(){const e=document.querySelector("nav.navbar.principal");e&&(window.scrollY>20?(e.classList.add("solid"),e.classList.remove("transparent")):(e.classList.add("transparent"),e.classList.remove("solid")))}function mostrarMetodosContacto(e){const o=document.querySelector("#contacto");"telefono"===e.target.value?o.innerHTML='         \n            <div class="campo">           \n                <label for="telefono">Número de Teléfono</label>\n                <input type="tel" placeholder="Tu Teléfono" name="contacto[tel]" autocomplete="tel" id="telefono">\n            </div>\n\n            <p>Seleccione la Fecha y la Hora</p>\n            <div class="formulario-nombres">\n                <div class="campo">\n                    <label for="fecha">Fecha:</label>\n                    <input type="date" name="contacto[fecha]" id="fecha">\n                </div>\n\n                <div class="campo">\n                    <label for="hora">Hora:</label>\n                    <input type="time" name="contacto[hora]" id="hora" min="09:00" max="18:00">\n                </div>\n            </div>\n        ':o.innerHTML='\n            <div class="campo">\n                <label for="email">E-mail</label>\n                <input type="email" placeholder="Tu Email" name="contacto[email]" autocomplete="email" id="email" required>\n            </div>\n        '}function eventListener(){darkMode(),handleScroll(),window.addEventListener("scroll",handleScroll);document.querySelectorAll('input[name="contacto[contacto]"').forEach(e=>e.addEventListener("click",mostrarMetodosContacto)),actualizarContadorCarrito(),document.querySelectorAll(".add-to-cart").forEach(e=>{e.addEventListener("click",(async function(e){const o=this.dataset.id;try{const e=await fetch("/bookspot/public/index.php/carrito/agregar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_libro:o})});if(e.ok){const o=await e.json();actualizarContadorCarrito(),this.textContent="added"===o.status?"Quitar del carrito":"Agregar al carrito"}else console.error("Error al agregar al carrito.")}catch(e){console.error("Error:",e)}}))})}async function actualizarContadorCarrito(){try{const e=await fetch("/bookspot/public/index.php/carrito/contar");if(e.ok){const o=await e.json(),t=document.querySelector(".cart-count");t&&(t.textContent=o.count)}}catch(e){console.error("Error al obtener el conteo del carrito:",e)}}document.addEventListener("DOMContentLoaded",(function(){eventListener()}));
//# sourceMappingURL=bundle.js.map
